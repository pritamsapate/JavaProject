CREATE TABLE accounts 
( 
id INT GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) UNIQUE,
accno INT NOT NULL,
name VARCHAR(30) NOT NULL,
phone VARCHAR(10) NOT NULL,
balance INT default 0,
PRIMARY KEY (accno)
);

INSERT INTO accounts(accno, name, phone, balance) VALUES(101, 'Abhijeet Mohite', '9123456789', 50000),(102, 'Abhishek', '9234567890', 50000), (103, 'Pritam Sapate', '9345678901', 50000);

CREATE TABLE beneficiaries 
( 
id INT GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) UNIQUE,
accno INT NOT NULL,
ifsc VARCHAR(11) NOT NULL,
name varchar(30) NOT NULL,
phone varchar(10) NOT NULL,
PRIMARY KEY (accno)
);

INSERT INTO beneficiaries(accno, ifsc, name, phone) VALUES(101, 'SBIN0001537', 'Abhijeet Mohite', '9123456789'), (102, 'ICIC0006561', 'Abhishek', '9234567890'), (103, 'HDFC0001015', 'Pritam Sapate', '9345678901');

CREATE TABLE accountsbeneficiaries
( 
id INT GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) UNIQUE,
accno INT REFERENCES accounts(accno),
benaccno INT REFERENCES beneficiaries(accno),
PRIMARY KEY (accno, benaccno)
);

INSERT INTO accountsbeneficiaries(accno, benaccno) VALUES (101, 102), (101, 103), (102, 101), (102, 103), (103, 101), (103, 102);


CREATE TABLE fundtransfertxnlogs
(
id INT GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) UNIQUE,
txnid INT NOT NULL,
txndatetime VARCHAR(14), -- YYYYMMDDHHMMSS
txnamount INT NOT NULL,
accno INT NOT NULL,
benaccno INT NOT NULL,
remarks VARCHAR(50),
PRIMARY KEY (TXNID)
);

CREATE TABLE acctxnlogs(
id INT GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) UNIQUE,
accno INT NOT NULL,
txndatetime VARCHAR(14) NOT NULL,
remarks VARCHAR(50),
amount INT NOT NULL,
iscredited TINYINT NOT NULL,
PRIMARY KEY (accno, txndatetime,remarks,amount,iscredited)
);

CREATE TABLE appusers (
	id int GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) PRIMARY KEY,
	username varchar(20) UNIQUE NOT NULL,
	password varchar(20),
	name varchar(20) NOT NULL
);

INSERT INTO APPUSERS(username, password, name) VALUES('abhijeet', 'password', 'Abhijeet Mohite');
INSERT INTO APPUSERS(username, password, name) VALUES('abhishek', 'password', 'Abhishek');
INSERT INTO APPUSERS(username, password, name) VALUES('pritam', 'password', 'Pritam Sapate');

CREATE TABLE useraccounts (
	id INT GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1),
	userid INT REFERENCES appusers(id),
	accid INT REFERENCES accounts(id),
	PRIMARY KEY(userid, accid)
);

INSERT INTO useraccounts(userid, accid) VALUES (1, 1), (2,2), (3,3);
